<section class="max-w-4xl mx-auto px-4 py-8 mt-20">
  <h1 class="text-3xl font-bold mb-6">Blogs recientes</h1>

  <ul class="space-y-6">
    @for (blog of paginatedBlogs; track blog.id) {
    <li class="bg-white shadow rounded-lg overflow-hidden">
      <article class="md:flex">
        <!-- Cover -->
        <div class="md:w-1/3">
          @if (blog.coverUrl) {
          <img
            [src]="blog.coverUrl"
            [alt]="blog.title + ' cover'"
            class="w-full h-40 md:h-full object-cover"
            loading="lazy"
          />
          } @else {
          <div
            class="w-full h-40 md:h-full bg-gray-200 flex items-center justify-center text-gray-500"
          >
            No image
          </div>
          }
        </div>

        <!-- Content -->
        <div class="p-4 md:w-2/3 flex flex-col">
          <header class="flex items-start justify-between gap-3">
            <div>
              <h2 class="text-xl font-semibold leading-tight">
                <a
                  [routerLink]="['/blog', blog.id]"
                  class="hover:text-pink-600"
                  >{{ blog.title }}</a
                >
              </h2>
              <div class="text-sm text-gray-500 mt-1">
                <span>{{ formatDate(blog.publishedAt) }}</span>
                @if (blog.readTimeMinutes) {
                <span> • {{ blog.readTimeMinutes }} min read</span>
                }
              </div>
              @if (blog.author?.name) {
              <div class="text-sm text-gray-700 mt-1">
                By <span class="font-medium">{{ blog.author?.name }}</span>
              </div>
              }
            </div>
            <div class="text-right">
              <div class="text-sm text-gray-600">
                {{ blog.commentsCount || 0 }} comentarios
              </div>
            </div>
          </header>

          <p class="mt-3 text-gray-700 flex-grow">{{ blog.excerpt }}</p>

          <footer class="mt-4 flex items-center justify-between gap-4">
            <div class="flex items-center flex-wrap gap-2">
              @for (tag of blog.tags; track tag) {
              <span
                class="text-xs font-medium px-2 py-1 rounded-full"
                [ngClass]="{
                  'bg-blue-100 text-blue-700 border-blue-200': tag === 'Tech',
                  'bg-green-100 text-green-700 border-green-200':
                    tag === 'Marketing',
                  'bg-pink-100 text-pink-700 border-pink-200': tag === 'Design',
                  'bg-purple-100 text-purple-700 border-purple-200':
                    tag === 'UI/UX',
                  'bg-yellow-100 text-yellow-700 border-yellow-200':
                    tag === 'Retention',
                  'bg-cyan-100 text-cyan-700': tag === 'Accessibility'
                }"
              >
                {{ tag }}
              </span>
              }
            </div>

            <a
              [routerLink]="'/blog/' + blog.id"
              class="text-sm font-semibold px-3 py-2 rounded-md bg-gradient-to-r from-purple-700 to-pink-500 text-white hover:opacity-90"
            >
              Leer más
            </a>
          </footer>
        </div>
      </article>
    </li>
    }
  </ul>

  <app-pagination
    [totalItems]="blogs.length"
    [itemsPerPage]="itemsPerPage"
    [currentPage]="currentPage"
    (pageChange)="onPageChange($event)"
  ></app-pagination>
</section>